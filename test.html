<!DOCTYPE html>
 <head>
  <meta charset=UTF-8>
  <title></title>
  <style>
  </style>
 </head>
 <body>
 <div id="messages"></div>

 <script src="class.js"></script>

 <script>
  function msg(str){
   document.getElementById('messages').innerHTML += str+'<br/>\n';
  }
 </script>

 <script>

  /*
    The automorphisms
  */

  var valency = 3;
  var maxdepth = 15;
  var LA = []; for (var n=0;n<valency;n++) LA.push(n);

  var saveT = [];

  for (var depth=1; depth<=maxdepth; depth++){

   var G3 = new Graph('thegraph');
   G3.add_regular_tree(valency,depth);

   var A3 = new Automorphism('aut3',valency);
/*
  A3.set_reference_address([0,1]);
  A3.set_destination_address([0]);
  A3.add_local_action([0,1],[0,1,2]);
  A3.set_constant_local_action();
*/
   A3.set_reference_address([]);
   A3.set_destination_address([0]);
//   A3.add_local_action([],[0,1,2]);
   A3.add_local_action([],LA);
   A3.set_constant_local_action();

   var t0 = performance.now();
   G3.vertices.map(s=>A3.destination_of_address(s.address));
   var t1 = performance.now();
   saveT.push(t1-t0);
   msg('valency = '+valency+' depth = '+depth+' Naddresses = '+G3.vertices.length+' T = '+(t1-t0)+' ms'+(depth>7?' factor = '+(saveT[saveT.length-1]/saveT[saveT.length-2]).toFixed(2):''));
  }

  // show the destinations on the page
//  G3.alphabet = 'rbg'.split('');
//  G3.vertices.map(s=>msg(s.label()+' -> '+A3.label(A3.address_destinations[s.address],G3)));

 </script>
 </body>
</html>
